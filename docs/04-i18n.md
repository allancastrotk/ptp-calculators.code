# Internationalization

Defines language strategy and conventions for all calculators.

## Supported languages

- `pt_BR`
- `en_US`
- `es_ES`

## Detection and propagation

- The host page detects the user language and passes it to the iframe.
- Preferred channel: `postMessage` with a `language` field.
- Fallback: query string parameter `?lang=pt_BR|en_US|es_ES`.
- If no language is provided, default to `pt_BR`.

## Frontend vs backend responsibilities

- Frontend (iframe UI): labels, placeholders, and UI text.
- Backend (API): validation messages and warnings returned in responses.
- The `language` field in the API request controls backend message localization.

## Translation key consistency

- Keep a shared, stable key set across all calculators.
- New keys must be added for all languages in the same change set.
- Avoid calculator-specific key drift by using a naming convention (e.g., `inputs.*`, `outputs.*`, `errors.*`).

## Fallbacks

- If a key is missing, fall back to `pt_BR`.
- If a language code is unsupported, ignore it and use `pt_BR`.
