import React, { createContext, useContext, useMemo, useState } from "react";

export type Language = "pt_BR" | "en_US" | "es_ES";

export type I18nContextValue = {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
};

const dictionaries: Record<Language, Record<string, string>> = {
  en_US: {
    appTitle: "PowerTunePro Calculators",
    unitLabel: "Unit",
    unitMetric: "Metric",
    unitImperial: "Imperial",
    measureLabel: "MEASURE",
    compressionLabel: "TAXA",
    compressionOn: "On",
    compressionOff: "Off",
    compressionSectionTitle: "Compression",
    compressionModeLabel: "MODE",
    compressionModeSimple: "Simple",
    compressionModeAdvanced: "Technical",
    compressionTwoStrokeSectionTitle: "Two-stroke engines",
    chamberVolumeLabel: "Chamber volume",
    gasketThicknessLabel: "Gasket thickness",
    gasketBoreLabel: "Gasket bore",
    deckHeightLabel: "Deck height",
    pistonVolumeLabel: "Piston volume",
    exhaustPortHeightLabel: "Exhaust port height",
    transferPortHeightLabel: "Transfer port height",
    crankcaseVolumeLabel: "Crankcase volume",
    compressionRatioLabel: "Compression ratio",
    clearanceVolumeLabel: "Clearance volume",
    sweptVolumeLabel: "Swept volume",
    trappedVolumeLabel: "Trapped volume",
    crankcaseCompressionLabel: "Crankcase compression",
    unitLocked: "Unit system not applicable",
    unitOutputImperial: "Outputs in inches",
    loading: "Calculating...",
    errorTitle: "Something went wrong",
    footer: "PowerTunePro",
    displacement: "Displacement",
    rl: "R/L Ratio",
    sprocket: "Sprocket Ratio",
    tires: "Tire and Rim",
    placeholder: "UI will be wired next",
    calculate: "Calculate",
    calculateOriginal: "Calculate Original",
    calculateNew: "Calculate New",
    clear: "Clear",
    originalSection: "Original",
    newSection: "Modified",
    originalResultsTitle: "Original results",
    newResultsTitle: "New results",
    originalAssemblySection: "Original assembly",
    newAssemblySection: "New assembly",
    originalAssemblyResultsTitle: "Original assembly results",
    newAssemblyResultsTitle: "New assembly results",
    comparisonAssemblyTitle: "Assembly comparison",
    statusTitle: "Status",
    statusLabel: "Status",
    deltaDiffLabel: "Δ Difference",
    comparisonTitle: "Comparison",
    comparisonDeclaredTitle: "Comparison with Declared",
    comparisonNewTitle: "Comparison with New",
    comparisonStatusLabel: "Status",
    normalizedInputsTitle: "Normalized inputs (mm)",
    compareDeclaredLabel: "Declared displacement (optional)",
    compareDeclaredHelp: "Compare only. Does not change the calculation.",
    displacementCcLabel: "Displacement (cc)",
    displacementLabel: "Displacement",
    displacementLLabel: "Displacement (L)",
    displacementCiLabel: "Displacement (cu in)",
    geometryLabel: "Geometry",
    smoothnessLabel: "Smoothness",
    diffVsOriginalLabel: "Diff vs Original (%)",
    diffLabel: "Diff (%)",
    resultsTitle: "Results",
    rlRatioLabel: "R/L",
    rodStrokeLabel: "Rod/Stroke",
    sprocketRatioLabel: "Ratio",
    sprocketDiffPercentLabel: "Diff (%)",
    sprocketDiffLabel: "Diff",
    chainPitchLabel: "Chain pitch",
    chainLinksLabel: "Chain links",
    chainPitchPlaceholder: "Select...",
    chainLengthLabel: "Chain length",
    centerDistanceLabel: "Center distance",
    chainLengthDiffLabel: "Diff chain length",
    centerDistanceDiffLabel: "Diff center distance",
    tiresDiameterLabel: "Diameter",
    tiresWidthLabel: "Width",
    tiresDiffDiameterLabel: "Diff diameter",
    tiresDiffDiameterPercentLabel: "Diff diameter (%)",
    tiresDiffWidthLabel: "Diff width",
    tiresDiffWidthPercentLabel: "Diff width (%)",
    selectPlaceholder: "Select...",
    diffRlLabel: "Diff R/L (%)",
    diffDisplacementLabel: "Diff displacement (%)",
    differenceLabel: "Difference",
    tireRimDeltaLabel: "Tire vs rim delta",
    geometry_square: "Square",
    geometry_oversquare: "Oversquare",
    geometry_undersquare: "Undersquare",
    smoothness_rough: "Rough",
    smoothness_normal: "Normal",
    smoothness_smooth: "Smooth",
    compareHint: "Calculate the Original to see comparison",
    compareHintWidget: "Calculate the Original on this page to enable comparison.",
    pageIdMissing: "Host should provide pageId to enable comparison between widgets.",
    warmupMessage: "Warming up server... (first request may take a few seconds)",
    retryHint: "Please try again.",
    hintBore: "Cylinder bore (internal diameter).",
    hintStroke: "Piston stroke from TDC to BDC.",
    hintCylinders: "Total number of cylinders.",
    hintRodLength: "Center-to-center rod length.",
    hintBaselineCc: "Declared displacement for comparison only.",
    hintSprocketTeeth: "Front sprocket tooth count.",
    hintCrownTeeth: "Rear sprocket tooth count.",
    hintChainPitch: "Chain pitch code (e.g., 520, 525).",
    hintChainLinks: "Total chain links (even number).",
    hintVehicleType: "Vehicle category to load valid sizes.",
    hintRim: "Wheel diameter in inches.",
    hintWidth: "Tire section width (metric).",
    hintAspect: "Sidewall height as % of width.",
    hintRimWidth: "Rim width for reference.",
    hintFlotation: "Flotation size in inches (e.g., 31x10.5-15).",
    hintChamberVolume: "Combustion chamber volume.",
    hintGasketThickness: "Head gasket thickness.",
    hintGasketBore: "Head gasket bore diameter.",
    hintDeckHeight: "Deck clearance (piston-to-deck).",
    hintPistonVolume: "Piston dome (negative) or dish (positive).",
    hintExhaustPortHeight: "Exhaust port height (2T).",
    hintTransferPortHeight: "Transfer port height (2T).",
    hintCrankcaseVolume: "Crankcase volume (2T).",
    hintDisplacementCc: "Total displacement in cubic centimeters.",
    hintDisplacementL: "Total displacement in liters.",
    hintDisplacementCi: "Total displacement in cubic inches.",
    hintGeometry: "Bore vs stroke classification.",
    hintCompressionRatio: "Geometric (4T) or effective (2T) compression.",
    hintClearanceVolume: "Total clearance volume at TDC.",
    hintSweptVolume: "Swept volume of one cylinder.",
    hintTrappedVolume: "Effective swept volume for 2T.",
    hintCrankcaseCompression: "Crankcase compression ratio (2T).",
    hintRlRatio: "R/L = (stroke / 2) / rod_length.",
    hintRodStrokeRatio: "Rod/Stroke = rod_length / stroke.",
    hintSmoothness: "Smoothness class from rod ratio.",
    hintSprocketRatio: "Rear teeth / front teeth.",
    hintChainLength: "Total chain length from pitch and links.",
    hintCenterDistance: "Estimated center distance between shafts.",
    hintTireDiameter: "Total tire diameter (rim + sidewalls).",
    hintTireWidth: "Total section width.",
    hintRimTireDelta: "Difference between tire width and rim width.",
    originalValueLabel: "Original",
    newValueLabel: "New",
    diffValueLabel: "Diff",
    diffPercentLabel: "Diff (%)",
    notApplicableLabel: "—",
    boreLabel: "Bore",
    strokeLabel: "Stroke",
    cylindersLabel: "Cylinders",
    baselineLabel: "Baseline cc (optional)",
    rodLengthLabel: "Rod length",
    sprocketLabel: "Front teeth",
    crownLabel: "Rear teeth",
    vehicleTypeLabel: "Vehicle type",
    rimLabel: "Rim",
    widthLabel: "Width",
    aspectLabel: "Aspect",
    rimWidthLabel: "Rim width (optional)",
    flotationLabel: "Flotation size (optional)",
    measureMetricLabel: "Metric",
    measureFlotationLabel: "Flotation",
    Car: "Car",
    Motorcycle: "Motorcycle",
    LightTruck: "Light Truck",
    TruckCommercial: "Truck (Commercial)",
    Kart: "Kart",
    Kartcross: "Kartcross",
    required: "Required",
  },
  pt_BR: {
    appTitle: "PowerTunePro Calculators",
    unitLabel: "Unidade",
    unitMetric: "Metrico",
    unitImperial: "Imperial",
    measureLabel: "MEDIDA",
    compressionLabel: "TAXA",
    compressionOn: "On",
    compressionOff: "Off",
    compressionSectionTitle: "Taxa de compressao",
    compressionModeLabel: "MODO",
    compressionModeSimple: "Simples",
    compressionModeAdvanced: "Tecnico",
    compressionTwoStrokeSectionTitle: "Motores 2 tempos",
    chamberVolumeLabel: "Volume da camara",
    gasketThicknessLabel: "Espessura da junta",
    gasketBoreLabel: "Diametro da junta",
    deckHeightLabel: "Deck height",
    pistonVolumeLabel: "Volume do pistao",
    exhaustPortHeightLabel: "Altura da janela de escape",
    transferPortHeightLabel: "Altura da janela de transferencia",
    crankcaseVolumeLabel: "Volume do carter",
    compressionRatioLabel: "Taxa de compressao",
    clearanceVolumeLabel: "Volume de folga",
    sweptVolumeLabel: "Volume varrido",
    trappedVolumeLabel: "Volume aprisionado",
    crankcaseCompressionLabel: "Taxa do carter",
    unitLocked: "Sistema nao aplicavel",
    unitOutputImperial: "Saida em polegadas",
    loading: "Calculando...",
    errorTitle: "Algo deu errado",
    footer: "PowerTunePro",
    displacement: "Cilindrada",
    rl: "Relacao R/L",
    sprocket: "Relacao Coroa-Pinhao",
    tires: "Aro e Pneu",
    placeholder: "UI sera conectada em breve",
    calculate: "Calcular",
    calculateOriginal: "Calcular Original",
    calculateNew: "Calcular Novo",
    clear: "Limpar",
    originalSection: "Original",
    newSection: "Novo",
    originalResultsTitle: "Resultados do Original",
    newResultsTitle: "Resultados do Novo",
    originalAssemblySection: "Conjunto Original",
    newAssemblySection: "Conjunto Novo",
    originalAssemblyResultsTitle: "Resultados do Conjunto Original",
    newAssemblyResultsTitle: "Resultados do Conjunto Novo",
    comparisonAssemblyTitle: "Comparacao entre os Conjuntos",
    statusTitle: "Status",
    statusLabel: "Status",
    deltaDiffLabel: "Δ Diferenca",
    comparisonTitle: "Comparacao",
    comparisonDeclaredTitle: "Comparacao com o Declarado",
    comparisonNewTitle: "Comparacao com o Novo",
    comparisonStatusLabel: "Status",
    normalizedInputsTitle: "Entradas normalizadas (mm)",
    compareDeclaredLabel: "Cilindrada declarada (opcional)",
    compareDeclaredHelp: "Apenas comparacao. Nao altera o calculo.",
    displacementCcLabel: "Cilindrada (cc)",
    displacementLabel: "Cilindrada",
    displacementLLabel: "Cilindrada (L)",
    displacementCiLabel: "Cilindrada (pol^3)",
    geometryLabel: "Geometria",
    smoothnessLabel: "Suavidade",
    diffVsOriginalLabel: "Diferenca vs Original (%)",
    diffLabel: "Diferenca (%)",
    resultsTitle: "Resultados",
    rlRatioLabel: "R/L",
    rodStrokeLabel: "Biela/Curso",
    sprocketRatioLabel: "Relacao",
    sprocketDiffPercentLabel: "Diferenca (%)",
    sprocketDiffLabel: "Diferenca",
    chainPitchLabel: "Passo da corrente",
    chainLinksLabel: "Numero de elos",
    chainPitchPlaceholder: "Selecione...",
    chainLengthLabel: "Comprimento da corrente",
    centerDistanceLabel: "Distancia entre eixos",
    chainLengthDiffLabel: "Dif. comprimento",
    centerDistanceDiffLabel: "Dif. distancia",
    tiresDiameterLabel: "Diametro",
    tiresWidthLabel: "Largura",
    tiresDiffDiameterLabel: "Dif. diametro",
    tiresDiffDiameterPercentLabel: "Dif. diametro (%)",
    tiresDiffWidthLabel: "Dif. largura",
    tiresDiffWidthPercentLabel: "Dif. largura (%)",
    selectPlaceholder: "Selecione...",
    diffRlLabel: "Diferenca R/L (%)",
    diffDisplacementLabel: "Diferenca deslocamento (%)",
    differenceLabel: "Diferenca",
    tireRimDeltaLabel: "Diferenca pneu/aro",
    geometry_square: "Quadrado",
    geometry_oversquare: "Superquadrado",
    geometry_undersquare: "Subquadrado",
    smoothness_rough: "Aspero",
    smoothness_normal: "Normal",
    smoothness_smooth: "Suave",
    compareHint: "Calcule o Original para ver comparacao",
    compareHintWidget: "Calcule o Original nesta pagina para habilitar a comparacao.",
    pageIdMissing: "O host deve fornecer pageId para habilitar comparacao entre widgets.",
    warmupMessage: "Aguardando servidor... (primeiro acesso pode demorar alguns segundos)",
    retryHint: "Tente novamente.",
    hintBore: "Diametro interno do cilindro.",
    hintStroke: "Curso do pistao do PMS ao PMI.",
    hintCylinders: "Numero total de cilindros.",
    hintRodLength: "Comprimento centro-a-centro da biela.",
    hintBaselineCc: "Cilindrada declarada apenas para comparacao.",
    hintSprocketTeeth: "Numero de dentes do pinhao.",
    hintCrownTeeth: "Numero de dentes da coroa.",
    hintChainPitch: "Codigo do passo da corrente (ex.: 520, 525).",
    hintChainLinks: "Total de elos da corrente (numero par).",
    hintVehicleType: "Categoria do veiculo para carregar medidas validas.",
    hintRim: "Diametro do aro em polegadas.",
    hintWidth: "Largura nominal do pneu (metrico).",
    hintAspect: "Altura do flanco em % da largura.",
    hintRimWidth: "Tala do aro para referencia.",
    hintFlotation: "Medida flotation em polegadas (ex.: 31x10.5-15).",
    hintChamberVolume: "Volume da camara de combustao.",
    hintGasketThickness: "Espessura da junta de cabecote.",
    hintGasketBore: "Diametro do furo da junta.",
    hintDeckHeight: "Altura do deck (pistao abaixo/acima).",
    hintPistonVolume: "Volume do pistao (dome negativo, dish positivo).",
    hintExhaustPortHeight: "Altura da janela de escape (2T).",
    hintTransferPortHeight: "Altura da janela de transferencia (2T).",
    hintCrankcaseVolume: "Volume do carter (2T).",
    hintDisplacementCc: "Cilindrada total em centimetros cubicos.",
    hintDisplacementL: "Cilindrada total em litros.",
    hintDisplacementCi: "Cilindrada total em polegadas cubicas.",
    hintGeometry: "Classificacao entre bore e stroke.",
    hintCompressionRatio: "Taxa geometrica (4T) ou efetiva (2T).",
    hintClearanceVolume: "Volume total de folga no PMS.",
    hintSweptVolume: "Volume varrido de um cilindro.",
    hintTrappedVolume: "Volume efetivo para 2T.",
    hintCrankcaseCompression: "Taxa do carter (2T).",
    hintRlRatio: "R/L = (stroke / 2) / rod_length.",
    hintRodStrokeRatio: "Rod/Stroke = rod_length / stroke.",
    hintSmoothness: "Classe de suavidade pelo rod ratio.",
    hintSprocketRatio: "Relacao coroa / pinhao.",
    hintChainLength: "Comprimento da corrente por passo e elos.",
    hintCenterDistance: "Distancia estimada entre eixos.",
    hintTireDiameter: "Diametro total do conjunto (aro + flancos).",
    hintTireWidth: "Largura total do conjunto.",
    hintRimTireDelta: "Diferenca entre largura do pneu e do aro.",
    originalValueLabel: "Original",
    newValueLabel: "Novo",
    diffValueLabel: "Diferenca",
    diffPercentLabel: "Diferenca (%)",
    notApplicableLabel: "—",
    boreLabel: "Diametro",
    strokeLabel: "Curso",
    cylindersLabel: "Cilindros",
    baselineLabel: "Base cc (opcional)",
    rodLengthLabel: "Comprimento da biela",
    sprocketLabel: "Dentes dianteiro",
    crownLabel: "Dentes traseiro",
    vehicleTypeLabel: "Tipo de veiculo",
    rimLabel: "Aro",
    widthLabel: "Largura",
    aspectLabel: "Perfil",
    rimWidthLabel: "Tala do aro (opcional)",
    flotationLabel: "Medida flotation (opcional)",
    measureMetricLabel: "Metrico",
    measureFlotationLabel: "Flotation",
    Car: "Carro",
    Motorcycle: "Moto",
    LightTruck: "SUV/Picape/Van",
    TruckCommercial: "Caminhao Comercial",
    Kart: "Kart",
    Kartcross: "Kartcross",
    required: "Obrigatorio",
  },
  es_ES: {
    appTitle: "PowerTunePro Calculators",
    unitLabel: "Unidad",
    unitMetric: "Metrico",
    unitImperial: "Imperial",
    measureLabel: "MEDIDA",
    compressionLabel: "TAXA",
    compressionOn: "On",
    compressionOff: "Off",
    compressionSectionTitle: "Compresion",
    compressionModeLabel: "MODO",
    compressionModeSimple: "Simple",
    compressionModeAdvanced: "Tecnico",
    compressionTwoStrokeSectionTitle: "Motores 2 tiempos",
    chamberVolumeLabel: "Volumen de camara",
    gasketThicknessLabel: "Espesor de junta",
    gasketBoreLabel: "Diametro de junta",
    deckHeightLabel: "Deck height",
    pistonVolumeLabel: "Volumen de piston",
    exhaustPortHeightLabel: "Altura de escape",
    transferPortHeightLabel: "Altura de transferencia",
    crankcaseVolumeLabel: "Volumen de carter",
    compressionRatioLabel: "Relacion de compresion",
    clearanceVolumeLabel: "Volumen de holgura",
    sweptVolumeLabel: "Volumen barrido",
    trappedVolumeLabel: "Volumen atrapado",
    crankcaseCompressionLabel: "Compresion del carter",
    unitLocked: "Sistema no aplicable",
    unitOutputImperial: "Salida en pulgadas",
    loading: "Calculando...",
    errorTitle: "Algo salio mal",
    footer: "PowerTunePro",
    displacement: "Cilindrada",
    rl: "Relacion R/L",
    sprocket: "Relacion Corona-Pinon",
    tires: "Llanta y Neumatico",
    placeholder: "La UI se conectara pronto",
    calculate: "Calcular",
    calculateOriginal: "Calcular Original",
    calculateNew: "Calcular Nuevo",
    clear: "Limpiar",
    originalSection: "Original",
    newSection: "Nuevo",
    originalResultsTitle: "Resultados del Original",
    newResultsTitle: "Resultados del Nuevo",
    originalAssemblySection: "Conjunto Original",
    newAssemblySection: "Conjunto Nuevo",
    originalAssemblyResultsTitle: "Resultados del Conjunto Original",
    newAssemblyResultsTitle: "Resultados del Conjunto Nuevo",
    comparisonAssemblyTitle: "Comparacion entre Conjuntos",
    statusTitle: "Estado",
    statusLabel: "Estado",
    deltaDiffLabel: "Δ Diferencia",
    comparisonTitle: "Comparacion",
    comparisonDeclaredTitle: "Comparacion con el Declarado",
    comparisonNewTitle: "Comparacion con el Nuevo",
    comparisonStatusLabel: "Estado",
    normalizedInputsTitle: "Entradas normalizadas (mm)",
    compareDeclaredLabel: "Cilindrada declarada (opcional)",
    compareDeclaredHelp: "Solo comparacion. No cambia el calculo.",
    displacementCcLabel: "Cilindrada (cc)",
    displacementLabel: "Cilindrada",
    displacementLLabel: "Cilindrada (L)",
    displacementCiLabel: "Cilindrada (pulg^3)",
    geometryLabel: "Geometria",
    smoothnessLabel: "Suavidad",
    diffVsOriginalLabel: "Diferencia vs Original (%)",
    diffLabel: "Diferencia (%)",
    resultsTitle: "Resultados",
    rlRatioLabel: "R/L",
    rodStrokeLabel: "Biela/Carrera",
    sprocketRatioLabel: "Relacion",
    sprocketDiffPercentLabel: "Diferencia (%)",
    sprocketDiffLabel: "Diferencia",
    chainPitchLabel: "Paso de la cadena",
    chainLinksLabel: "Numero de eslabones",
    chainPitchPlaceholder: "Seleccionar...",
    chainLengthLabel: "Longitud de la cadena",
    centerDistanceLabel: "Distancia entre ejes",
    chainLengthDiffLabel: "Dif. longitud",
    centerDistanceDiffLabel: "Dif. distancia",
    tiresDiameterLabel: "Diametro",
    tiresWidthLabel: "Ancho",
    tiresDiffDiameterLabel: "Dif. diametro",
    tiresDiffDiameterPercentLabel: "Dif. diametro (%)",
    tiresDiffWidthLabel: "Dif. ancho",
    tiresDiffWidthPercentLabel: "Dif. ancho (%)",
    selectPlaceholder: "Seleccionar...",
    diffRlLabel: "Diferencia R/L (%)",
    diffDisplacementLabel: "Diferencia desplazamiento (%)",
    differenceLabel: "Diferencia",
    tireRimDeltaLabel: "Diferencia neumatico/llanta",
    geometry_square: "Cuadrado",
    geometry_oversquare: "Supercuadrado",
    geometry_undersquare: "Subcuadrado",
    smoothness_rough: "Aspero",
    smoothness_normal: "Normal",
    smoothness_smooth: "Suave",
    compareHint: "Calcule el Original para ver comparacion",
    compareHintWidget: "Calcula el Original en esta pagina para habilitar la comparacion.",
    pageIdMissing: "El host debe proporcionar pageId para habilitar la comparacion entre widgets.",
    warmupMessage: "Activando servidor... (la primera solicitud puede tardar unos segundos)",
    retryHint: "Intentalo de nuevo.",
    hintBore: "Diametro interno del cilindro.",
    hintStroke: "Carrera del piston de PMS a PMI.",
    hintCylinders: "Numero total de cilindros.",
    hintRodLength: "Longitud centro a centro de la biela.",
    hintBaselineCc: "Cilindrada declarada solo para comparacion.",
    hintSprocketTeeth: "Numero de dientes del pinon.",
    hintCrownTeeth: "Numero de dientes de la corona.",
    hintChainPitch: "Codigo de paso de cadena (ej.: 520, 525).",
    hintChainLinks: "Total de eslabones (numero par).",
    hintVehicleType: "Categoria del vehiculo para cargar medidas validas.",
    hintRim: "Diametro del aro en pulgadas.",
    hintWidth: "Ancho nominal del neumatico (metrico).",
    hintAspect: "Altura del flanco en % del ancho.",
    hintRimWidth: "Ancho del aro para referencia.",
    hintFlotation: "Medida flotation en pulgadas (ej.: 31x10.5-15).",
    hintChamberVolume: "Volumen de la camara de combustion.",
    hintGasketThickness: "Espesor de la junta de culata.",
    hintGasketBore: "Diametro del orificio de la junta.",
    hintDeckHeight: "Altura del deck (piston abajo/arriba).",
    hintPistonVolume: "Volumen del piston (dome negativo, dish positivo).",
    hintExhaustPortHeight: "Altura del puerto de escape (2T).",
    hintTransferPortHeight: "Altura del puerto de transferencia (2T).",
    hintCrankcaseVolume: "Volumen del carter (2T).",
    hintDisplacementCc: "Cilindrada total en centimetros cubicos.",
    hintDisplacementL: "Cilindrada total en litros.",
    hintDisplacementCi: "Cilindrada total en pulgadas cubicas.",
    hintGeometry: "Clasificacion entre bore y stroke.",
    hintCompressionRatio: "Tasa geometrica (4T) o efectiva (2T).",
    hintClearanceVolume: "Volumen total de holgura en PMS.",
    hintSweptVolume: "Volumen barrido de un cilindro.",
    hintTrappedVolume: "Volumen efectivo para 2T.",
    hintCrankcaseCompression: "Tasa del carter (2T).",
    hintRlRatio: "R/L = (stroke / 2) / rod_length.",
    hintRodStrokeRatio: "Rod/Stroke = rod_length / stroke.",
    hintSmoothness: "Clase de suavidad por rod ratio.",
    hintSprocketRatio: "Relacion corona / pinon.",
    hintChainLength: "Longitud de la cadena por paso y eslabones.",
    hintCenterDistance: "Distancia estimada entre ejes.",
    hintTireDiameter: "Diametro total del conjunto (aro + flancos).",
    hintTireWidth: "Ancho total del conjunto.",
    hintRimTireDelta: "Diferencia entre ancho del neumatico y del aro.",
    originalValueLabel: "Original",
    newValueLabel: "Nuevo",
    diffValueLabel: "Diferencia",
    diffPercentLabel: "Diferencia (%)",
    notApplicableLabel: "—",
    boreLabel: "Diametro",
    strokeLabel: "Carrera",
    cylindersLabel: "Cilindros",
    baselineLabel: "Base cc (opcional)",
    rodLengthLabel: "Longitud de biela",
    sprocketLabel: "Dientes delantero",
    crownLabel: "Dientes trasero",
    vehicleTypeLabel: "Tipo de vehiculo",
    rimLabel: "Llanta",
    widthLabel: "Ancho",
    aspectLabel: "Perfil",
    rimWidthLabel: "Ancho de llanta (opcional)",
    flotationLabel: "Medida flotation (opcional)",
    measureMetricLabel: "Metrico",
    measureFlotationLabel: "Flotation",
    Car: "Carro",
    Motorcycle: "Moto",
    LightTruck: "SUV/Pickup/Van",
    TruckCommercial: "Camion Comercial",
    Kart: "Kart",
    Kartcross: "Kartcross",
    required: "Requerido",
  },
};

const LanguageContext = createContext<I18nContextValue | null>(null);

export function LanguageProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguage] = useState<Language>("en_US");

  const value = useMemo<I18nContextValue>(() => {
    const dict = dictionaries[language];
    return {
      language,
      setLanguage,
      t: (key: string) => dict[key] || key,
    };
  }, [language]);

  return <LanguageContext.Provider value={value}>{children}</LanguageContext.Provider>;
}

export function useI18n(): I18nContextValue {
  const ctx = useContext(LanguageContext);
  if (!ctx) {
    throw new Error("useI18n must be used within LanguageProvider");
  }
  return ctx;
}
